<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="Headquartz.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:Headquartz.Pages"
    Shell.FlyoutBehavior="Flyout"
    Shell.FlyoutBackgroundColor="{AppThemeBinding Light={StaticResource LightSecondaryBackground}, Dark={StaticResource DarkSecondaryBackground}}"
    Shell.FlyoutWidth="280"
    Title="Headquartz">

    <!-- Custom Flyout Header -->
    <Shell.FlyoutHeader>
        <Grid BackgroundColor="{StaticResource Primary}" Padding="24" HeightRequest="140">
            <VerticalStackLayout VerticalOptions="Center" Spacing="8">
                <Label Text="ðŸ“Š ERP Simulator" FontSize="24" FontAttributes="Bold" TextColor="White" />
                <Label Text="Enterprise System" FontSize="14" TextColor="White" Opacity="0.8" />
                <Label Text="{Binding RoleName}" FontSize="13" TextColor="White" Opacity="0.9" Margin="0,8,0,0" />
            </VerticalStackLayout>
        </Grid>
    </Shell.FlyoutHeader>

    <!-- Main Menu Section -->
    <FlyoutItem Title="Dashboard" Icon="{StaticResource IconDashboard}" Route="dashboard">
        <ShellContent ContentTemplate="{DataTemplate pages:DashboardPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Overview" Icon="{StaticResource IconMeta}" Route="main">
        <ShellContent ContentTemplate="{DataTemplate pages:MainPage}" />
    </FlyoutItem>

    <!-- These will be dynamically shown/hidden based on role -->
    <FlyoutItem Title="Inventory" 
                Icon="{StaticResource IconProjects}" 
                Route="inventory" 
                x:Name="InventoryMenuItem">
        <ShellContent ContentTemplate="{DataTemplate pages:InventoryPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Market" 
                Icon="{StaticResource IconRibbon}" 
                Route="market" 
                x:Name="MarketMenuItem">
        <ShellContent ContentTemplate="{DataTemplate pages:MarketPage}" />
    </FlyoutItem>

    <!-- Uncomment when Finance page is ready -->
    <!--
    <FlyoutItem Title="Finance" 
                Route="finance" 
                x:Name="FinanceMenuItem">
        <ShellContent ContentTemplate="{DataTemplate pages:FinancePage}" />
    </FlyoutItem>
    -->

    <!-- Uncomment when HR page is ready -->
    <!--
    <FlyoutItem Title="Human Resources" 
                Route="hr" 
                x:Name="HRMenuItem">
        <ShellContent ContentTemplate="{DataTemplate pages:HumanResourcePage}" />
    </FlyoutItem>
    -->

    <!-- System Section -->
    <MenuFlyoutSeparator />

    <MenuItem Text="Settings" IconImageSource="{StaticResource IconMeta}" />

    <!-- Footer -->
    <Shell.FlyoutFooter>
        <Border Background="Transparent" Padding="24,16" StrokeThickness="0">
            <VerticalStackLayout Spacing="12">

                <!-- Theme Toggle -->
                <HorizontalStackLayout Spacing="8" HorizontalOptions="Start">
                    <Label Text="Theme:" 
                           FontSize="13" 
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource SecondaryDarkText}}" 
                           VerticalOptions="Center" />
                    <Switch IsToggled="{Binding IsDarkMode}" 
                            OnColor="{StaticResource Primary}" 
                            ThumbColor="White" 
                            VerticalOptions="Center" />
                    <Label Text="Dark" 
                           FontSize="13" 
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource SecondaryDarkText}}" 
                           VerticalOptions="Center" />
                </HorizontalStackLayout>

                <!-- Version Info -->
                <VerticalStackLayout Spacing="4">
                    <Label Text="Multi-user LAN Ready" 
                           FontSize="12" 
                           TextColor="{StaticResource Success}" />
                    <Label Text="v1.0.0" 
                           FontSize="11" 
                           TextColor="{AppThemeBinding Light={StaticResource Gray500}, Dark={StaticResource SecondaryDarkText}}" />
                </VerticalStackLayout>
            </VerticalStackLayout>
        </Border>
    </Shell.FlyoutFooter>

</Shell>