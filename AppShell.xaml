<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="Headquartz.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:Headquartz.Pages"
    Shell.FlyoutBehavior="Locked"
    Shell.FlyoutWidth="280"
    Shell.NavBarIsVisible="False"
    Title="Headquartz">

    <!-- Custom Sidebar Template -->
    <Shell.FlyoutContent>
        <Grid RowDefinitions="Auto,*,Auto"
              BackgroundColor="{DynamicResource BorderColor}">

            <!-- Sidebar Header -->
            <Border Grid.Row="0" 
                    BackgroundColor="{DynamicResource Primary}" 
                    Padding="24,20"
                    StrokeThickness="0">
                <VerticalStackLayout Spacing="8">
                    <Label Text="ðŸ“Š" 
                           FontSize="32" 
                           HorizontalOptions="Center"/>
                    <Label Text="ERP Simulator" 
                           FontSize="20" 
                           FontAttributes="Bold" 
                           TextColor="White"
                           HorizontalOptions="Center"/>
                    <Label Text="{Binding RoleName}" 
                           FontSize="13" 
                           TextColor="White" 
                           Opacity="0.9"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </Border>

            <!-- Navigation Menu -->
            <ScrollView Grid.Row="1" Padding="12,16">
                <VerticalStackLayout Spacing="4">

                    <!-- Dashboard -->
                    <Border Style="{DynamicResource SidebarItemStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding NavigateToDashboardCommand}"/>
                        </Border.GestureRecognizers>
                        <HorizontalStackLayout Spacing="12" Padding="12,10">
                            <Label Text="ðŸ“Š" FontSize="20" VerticalOptions="Center"/>
                            <Label Text="Dashboard" 
                                   Style="{DynamicResource SidebarItemText}"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Overview -->
                    <Border Style="{DynamicResource SidebarItemStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding NavigateToMainCommand}"/>
                        </Border.GestureRecognizers>
                        <HorizontalStackLayout Spacing="12" Padding="12,10">
                            <Label Text="ðŸ " FontSize="20" VerticalOptions="Center"/>
                            <Label Text="Overview" 
                                   Style="{DynamicResource SidebarItemText}"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Divider -->
                    <BoxView HeightRequest="1" 
                             Color="{DynamicResource BorderColor}"
                             Margin="12,8"/>

                    <!-- Modules Section Label -->
                    <Label Text="MODULES" 
                           FontSize="11" 
                           FontAttributes="Bold"
                           TextColor="{StaticResource SecondaryTextColor}"
                           Margin="12,8,12,4"/>

                    <!-- Inventory -->
                    <Border Style="{DynamicResource SidebarItemStyle}"
                            x:Name="InventoryItem">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding NavigateToInventoryCommand}"/>
                        </Border.GestureRecognizers>
                        <HorizontalStackLayout Spacing="12" Padding="12,10">
                            <Label Text="ðŸ“¦" FontSize="20" VerticalOptions="Center"/>
                            <Label Text="Inventory" 
                                   Style="{DynamicResource SidebarItemText}"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Market -->
                    <Border Style="{DynamicResource SidebarItemStyle}"
                            x:Name="MarketItem">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding NavigateToMarketCommand}"/>
                        </Border.GestureRecognizers>
                        <HorizontalStackLayout Spacing="12" Padding="12,10">
                            <Label Text="ðŸ“ˆ" FontSize="20" VerticalOptions="Center"/>
                            <Label Text="Market" 
                                   Style="{DynamicResource SidebarItemText}"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Finance -->
                    <Border Style="{DynamicResource SidebarItemStyle}"
                            x:Name="FinanceItem">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding NavigateToFinanceCommand}"/>
                        </Border.GestureRecognizers>
                        <HorizontalStackLayout Spacing="12" Padding="12,10">
                            <Label Text="ðŸ’°" FontSize="20" VerticalOptions="Center"/>
                            <Label Text="Finance" 
                                   Style="{DynamicResource SidebarItemText}"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Human Resources -->
                    <Border Style="{DynamicResource SidebarItemStyle}"
                            x:Name="HRItem">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding NavigateToHRCommand}"/>
                        </Border.GestureRecognizers>
                        <HorizontalStackLayout Spacing="12" Padding="12,10">
                            <Label Text="ðŸ‘¥" FontSize="20" VerticalOptions="Center"/>
                            <Label Text="Human Resources" 
                                   Style="{DynamicResource SidebarItemText}"
                                   VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Border>

                </VerticalStackLayout>
            </ScrollView>

            <!-- Sidebar Footer -->
            <Border Grid.Row="2" 
                    Padding="16,12"
                    BackgroundColor="Transparent"
                    StrokeThickness="0">
                <VerticalStackLayout Spacing="12">

                    <!-- Divider -->
                    <BoxView HeightRequest="1" 
                             Color="{DynamicResource BorderColor}"/>

                    <!-- Theme Toggle -->
                    <Border Background="{DynamicResource SidebarBackgroundColor}"
                            Padding="12,8"
                            StrokeShape="RoundRectangle 8"
                            StrokeThickness="0">
                        <HorizontalStackLayout Spacing="12" HorizontalOptions="FillAndExpand">
                            <Label Text="{Binding IsDarkMode}" 
                                   FontSize="18"
                                   VerticalOptions="Center" />
                            <Label Text="Theme" 
                                   FontSize="13" 
                                   TextColor="{DynamicResource SecondaryTextColor}" 
                                   VerticalOptions="Center"
                                   HorizontalOptions="StartAndExpand"/>
                            <Switch IsToggled="{Binding IsDarkMode}" 
                                    OnColor="{DynamicResource Primary}" 
                                    ThumbColor="White"
                                    VerticalOptions="Center"
                                    Scale="0.8"/>
                        </HorizontalStackLayout>
                    </Border>

                    <!-- Version Info -->
                    <VerticalStackLayout Spacing="2" Padding="4,0">
                        <Label Text="Multi-user LAN Ready" 
                               FontSize="11" 
                               TextColor="{DynamicResource Success}"
                               FontAttributes="Bold"/>
                        <Label Text="v1.0.0 â€¢ Enterprise Edition" 
                               FontSize="10" 
                               TextColor="{DynamicResource SecondaryTextColor}"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

        </Grid>
    </Shell.FlyoutContent>

    <!-- Main Shell Items with proper routes -->
    <FlyoutItem Title="Dashboard" Route="dashboard">
        <ShellContent ContentTemplate="{DataTemplate pages:DashboardPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Overview" Route="main">
        <ShellContent ContentTemplate="{DataTemplate pages:MainPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Inventory" Route="inventory" x:Name="InventoryFlyoutItem">
        <ShellContent ContentTemplate="{DataTemplate pages:InventoryPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Market" Route="market" x:Name="MarketFlyoutItem">
        <ShellContent ContentTemplate="{DataTemplate pages:MarketPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Finance" Route="finance" x:Name="FinanceFlyoutItem">
        <ShellContent ContentTemplate="{DataTemplate pages:FinancePage}" />
    </FlyoutItem>

    <FlyoutItem Title="Human Resources" Route="hr" x:Name="HRFlyoutItem">
        <ShellContent ContentTemplate="{DataTemplate pages:HumanResourcePage}" />
    </FlyoutItem>

</Shell>