<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Headquartz.Pages.SidebarPage"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <Grid ColumnDefinitions="250,*">

        <!-- LEFT SIDEBAR -->
        <Border Grid.Column="0"
                Background="{DynamicResource SidebarBackgroundColor}"
                Padding="0"
                StrokeThickness="0"
                StrokeShape="RoundRectangle 0,15,0,15">

            <Grid RowDefinitions="Auto,*,Auto">

                <!-- HEADER -->
                <Border Grid.Row="0"
                        Padding="20,10,20,0"
                        Background="{DynamicResource HeaderBackgroundColor}">

                    <VerticalStackLayout Spacing="0">

                        <!-- Logo + Title -->
                        <HorizontalStackLayout Spacing="12" HorizontalOptions="Start">
                            <Border Background="{StaticResource PrimaryColor}"
                                    WidthRequest="40"
                                    HeightRequest="40"
                                    StrokeThickness="0"
                                    StrokeShape="RoundRectangle 5">
                                <Label Text="HQ"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="White"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center"/>
                            </Border>

                            <VerticalStackLayout Spacing="0" VerticalOptions="Center">
                                <Label Text="Headquartz"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{DynamicResource PrimaryTextColor}"/>

                                <Label Text="ERP Simulator"
                                       FontSize="11"
                                       TextColor="{DynamicResource SecondaryTextColor}"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <!-- ROLE SELECTOR -->
                        <Border Background="{DynamicResource CardBackgroundColor}"
                                Padding="10,5"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 7.5"
                                Margin="0,5">

                            <Picker x:Name="RolePicker"
                                    Title="Select Role"
                                    ItemsSource="{Binding Roles}"
                                    ItemDisplayBinding="{Binding DisplayName}"
                                    SelectedItem="{Binding CurrentRole}"
                                    FontSize="13"
                                    TextColor="{DynamicResource PrimaryColor}" />
                        </Border>

                        <BoxView HeightRequest="1"
                                 Color="{DynamicResource BorderColor}" />
                    </VerticalStackLayout>
                </Border>

                <!-- MENU -->
                <ScrollView Grid.Row="1" Padding="12,8">
                    <VerticalStackLayout Spacing="2">

                        <!-- ====================================== -->
                        <!-- MAIN MENU â†’ Visible for ALL ROLES -->
                        <!-- ====================================== -->
                        <Label Text="Main Menu"
                               Style="{StaticResource SidebarSectionHeader}" />

                        <!-- Dashboard -->
                        <Border Style="{StaticResource SidebarItemStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToDashboardCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Dashboard"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Overview -->
                        <Border Style="{StaticResource SidebarItemStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToOverviewCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ " FontSize="16" />
                                </Border>
                                <Label Text="Overview"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>


                        <!-- ====================================== -->
                        <!-- DEPARTMENTS (CEO ONLY) -->
                        <!-- ====================================== -->
                        <Label Text="Departments"
                               IsVisible="{Binding IsCEO}"
                               Style="{StaticResource SidebarSectionHeader}"
                               Margin="12,16,12,4" />

                        <!-- Warehouse -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToWarehouseCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“¦" FontSize="16" />
                                </Border>

                                <VerticalStackLayout>
                                    <Label Text="Warehouse"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="Stock management"
                                           FontSize="10"
                                           TextColor="{StaticResource Gray500}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>

                        <!-- SALES -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToSalesCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ›’" FontSize="16" />
                                </Border>
                                <VerticalStackLayout>
                                    <Label Text="Sales"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="Orders and Customers"
                                           FontSize="10"
                                           TextColor="{StaticResource Gray500}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Marketing -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToMarketCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“ˆ" FontSize="16" />
                                </Border>

                                <VerticalStackLayout>
                                    <Label Text="Marketing"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="Demand and Pricing"
                                           FontSize="10"
                                           TextColor="{StaticResource Gray500}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Production -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToProductionCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="âš™ï¸" FontSize="16" />
                                </Border>

                                <VerticalStackLayout>
                                    <Label Text="Production"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="Manufacturing Ops"
                                           FontSize="10"
                                           TextColor="{StaticResource Gray500}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Logistics -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToLogisticsCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸšš" FontSize="16" />
                                </Border>

                                <VerticalStackLayout>
                                    <Label Text="Logistics"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="Shipping and Delivery"
                                           FontSize="10"
                                           TextColor="{StaticResource Gray500}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Finance -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToFinanceCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ’°" FontSize="16" />
                                </Border>

                                <VerticalStackLayout>
                                    <Label Text="Finance"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="Revenue and Costs"
                                           FontSize="10"
                                           TextColor="{StaticResource Gray500}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Human Resource -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToHRCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ‘¥" FontSize="16" />
                                </Border>

                                <VerticalStackLayout>
                                    <Label Text="Human Resource"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="Employee Management"
                                           FontSize="10"
                                           TextColor="{StaticResource Gray500}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>


                        <!-- ====================================== -->
                        <!-- TOOLS (ONLY FOR MANAGERS) -->
                        <!-- ====================================== -->
                        <Label Text="Tools"
                               IsVisible="{Binding IsManager}"
                               Style="{StaticResource SidebarSectionHeader}"
                               Margin="12,16,12,4" />

                        <!-- Example HR Tools -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsHRManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToEmployeeListCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“‹" FontSize="16" />
                                </Border>
                                <Label Text="Employee List"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>


                        <!-- ====================================== -->
                        <!-- SYSTEM (ALL ROLES) -->
                        <!-- ====================================== -->
                        <Label Text="System"
                               Style="{StaticResource SidebarSectionHeader}"
                               Margin="12,16,12,4" />

                        <!-- Users -->
                        <Border Style="{StaticResource SidebarItemStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToUsersCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ‘¨â€ðŸ’¼" FontSize="16" />
                                </Border>

                                <VerticalStackLayout>
                                    <Label Text="Users"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="User Management"
                                           FontSize="10"
                                           TextColor="{DynamicResource TertiaryTextColor}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Settings -->
                        <Border Style="{StaticResource SidebarItemStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToSettingsCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="âš™ï¸" FontSize="16" />
                                </Border>

                                <VerticalStackLayout>
                                    <Label Text="Settings"
                                           Style="{StaticResource SidebarItemText}" />
                                    <Label Text="System Configuration"
                                           FontSize="10"
                                           TextColor="{DynamicResource TertiaryTextColor}" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout>
                        </Border>

                    </VerticalStackLayout>
                </ScrollView>

                <!-- FOOTER -->
                <Border Grid.Row="2"
                        Padding="20,0,20,10"
                        Background="{DynamicResource HeaderBackgroundColor}">
                    <VerticalStackLayout Spacing="5"
                                         HorizontalOptions="Center"
                                         VerticalOptions="Center">

                        <BoxView HeightRequest="1"
                                 Color="{DynamicResource BorderColor}" />

                        <HorizontalStackLayout Spacing="10">
                            <Label Text="âœ“" FontSize="10" TextColor="{StaticResource Success}" />
                            <Label Text="v1.0.0 â€¢ LAN Ready"
                                   FontSize="10"
                                   TextColor="{DynamicResource TertiaryTextColor}" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Border>

            </Grid>
        </Border>

        <!-- RIGHT CONTENT -->
        <NavigationPage Grid.Column="1" x:Name="ContentHost" />


    </Grid>

</ContentPage>