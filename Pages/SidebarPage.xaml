<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Headquartz.Pages.SidebarPage"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <Grid ColumnDefinitions="250,*">

        <!-- LEFT SIDEBAR -->
        <Border Grid.Column="0"
                Background="{DynamicResource SidebarBackgroundColor}"
                Padding="0"
                StrokeThickness="0"
                StrokeShape="RoundRectangle 0,15,0,15">

            <Grid RowDefinitions="Auto,*,Auto">

                <!-- HEADER -->
                <Border Grid.Row="0"
                        Padding="20,10,20,0"
                        Background="{DynamicResource HeaderBackgroundColor}">

                    <VerticalStackLayout Spacing="0">

                        <!-- Logo + Title -->
                        <HorizontalStackLayout Spacing="12" HorizontalOptions="Start">
                            <Border Background="{StaticResource PrimaryColor}"
                                    WidthRequest="40"
                                    HeightRequest="40"
                                    StrokeThickness="0"
                                    StrokeShape="RoundRectangle 5">
                                <Label Text="HQ"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="White"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center"/>
                            </Border>

                            <VerticalStackLayout Spacing="0" VerticalOptions="Center">
                                <Label Text="Headquartz"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{DynamicResource PrimaryTextColor}"/>

                                <Label Text="ERP Simulator"
                                       FontSize="11"
                                       TextColor="{DynamicResource SecondaryTextColor}"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <!-- ROLE SELECTOR -->
                        <Border Background="{DynamicResource CardBackgroundColor}"
                                Padding="10,5"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 7.5"
                                Margin="0,5">

                            <Picker x:Name="RolePicker"
                                    Title="Select Role"
                                    ItemsSource="{Binding Roles}"
                                    ItemDisplayBinding="{Binding DisplayName}"
                                    SelectedItem="{Binding SelectedRole}"
                                    FontSize="13"
                                    TextColor="{DynamicResource PrimaryColor}" />
                        </Border>

                        <BoxView HeightRequest="1"
                                 Color="{DynamicResource BorderColor}" />
                    </VerticalStackLayout>
                </Border>

                <!-- MENU -->
                <ScrollView Grid.Row="1" Padding="12,8">
                    <VerticalStackLayout Spacing="2">

                        <!-- ====================================== -->
                        <!-- MAIN MENU â†’ Visible for ALL ROLES -->
                        <!-- ====================================== -->
                        <Label Text="Main Menu"
                               Style="{StaticResource SidebarSectionHeader}" />

                        <!-- Dashboard -->
                        <Border Style="{StaticResource SidebarItemStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToDashboardCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Dashboard"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Overview -->
                        <Border Style="{StaticResource SidebarItemStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToOverviewCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ " FontSize="16" />
                                </Border>
                                <Label Text="Overview"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>


                        <!-- ====================================== -->
                        <!-- DEPARTMENTS (CEO ONLY - Dashboard Links) -->
                        <!-- ====================================== -->
                        <Label Text="Departments"
                               IsVisible="{Binding IsCEO}"
                               Style="{StaticResource SidebarSectionHeader}"
                               Margin="12,16,12,4" />

                        <!-- Warehouse -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToWarehouseCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“¦" FontSize="16" />
                                </Border>
                                <Label Text="Warehouse"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Production -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToProductionCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="âš™ï¸" FontSize="16" />
                                </Border>
                                <Label Text="Production"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Sales -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToSalesCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ›’" FontSize="16" />
                                </Border>
                                <Label Text="Sales"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Human Resource -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToHRCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ‘¥" FontSize="16" />
                                </Border>
                                <Label Text="Human Resource"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Marketing -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToMarketCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“ˆ" FontSize="16" />
                                </Border>
                                <Label Text="Marketing"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Finance -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToFinanceCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ’°" FontSize="16" />
                                </Border>
                                <Label Text="Finance"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Logistics -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsCEO}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToLogisticsCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸšš" FontSize="16" />
                                </Border>
                                <Label Text="Logistics"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>


                        <!-- ====================================== -->
                        <!-- TOOLS (MANAGERS ONLY - Department Specific) -->
                        <!-- ====================================== -->
                        <Label Text="Tools"
                               IsVisible="{Binding IsManager}"
                               Style="{StaticResource SidebarSectionHeader}"
                               Margin="12,16,12,4" />

                        <!-- ============ WAREHOUSE MANAGER TOOLS ============ -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsWarehouseManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToWarehouseDashboardCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Warehouse Dashboard"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsWarehouseManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToInventoryCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“‹" FontSize="16" />
                                </Border>
                                <Label Text="Inventory"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsWarehouseManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToStockInCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“¥" FontSize="16" />
                                </Border>
                                <Label Text="Stock In"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsWarehouseManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToStockOutCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“¤" FontSize="16" />
                                </Border>
                                <Label Text="Stock Out"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsWarehouseManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToWarehouseReportsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Warehouse Reports"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- ============ HR MANAGER TOOLS ============ -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsHRManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToHRDashboardCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="HR Dashboard"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsHRManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToEmployeeListCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ‘¥" FontSize="16" />
                                </Border>
                                <Label Text="Employee List"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsHRManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToRecruitmentCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸŽ¯" FontSize="16" />
                                </Border>
                                <Label Text="Recruitment"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsHRManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToPayrollCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ’°" FontSize="16" />
                                </Border>
                                <Label Text="Payroll"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsHRManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToTrainingCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“š" FontSize="16" />
                                </Border>
                                <Label Text="Training"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsHRManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToHRReportsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="HR Reports"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- ============ FINANCE MANAGER TOOLS ============ -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsFinanceManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToFinanceDashboardCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Finance Dashboard"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsFinanceManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToBudgetCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ’¼" FontSize="16" />
                                </Border>
                                <Label Text="Budget"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsFinanceManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToExpensesCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“‰" FontSize="16" />
                                </Border>
                                <Label Text="Expenses"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsFinanceManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToRevenueCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“ˆ" FontSize="16" />
                                </Border>
                                <Label Text="Revenue"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsFinanceManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToFinanceReportsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Finance Reports"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- ============ SALES MANAGER TOOLS ============ -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsSalesManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToSalesDashboardCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Sales Dashboard"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsSalesManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToLeadsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸŽ¯" FontSize="16" />
                                </Border>
                                <Label Text="Leads"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsSalesManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToOrdersCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ›’" FontSize="16" />
                                </Border>
                                <Label Text="Orders"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsSalesManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToCustomersCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ‘¥" FontSize="16" />
                                </Border>
                                <Label Text="Customers"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsSalesManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToSalesReportsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Sales Reports"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- ============ MARKETING MANAGER TOOLS ============ -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsMarketingManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToMarketingDashboardCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Marketing Dashboard"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsMarketingManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToCampaignsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“¢" FontSize="16" />
                                </Border>
                                <Label Text="Campaigns"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsMarketingManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToMarketResearchCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ”" FontSize="16" />
                                </Border>
                                <Label Text="Market Research"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsMarketingManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToMarketingReportsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Marketing Reports"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- ============ PRODUCTION MANAGER TOOLS ============ -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsProductionManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToProductionDashboardCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Production Dashboard"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsProductionManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToWorkOrdersCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“‹" FontSize="16" />
                                </Border>
                                <Label Text="Work Orders"
                                       Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                                IsVisible="{Binding IsProductionManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToMachinesCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="âš™ï¸" FontSize="16" />
                                </Border>
                                <Label Text="Machines"
                                    Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>
                        <Border Style="{StaticResource SidebarItemStyle}"
                            IsVisible="{Binding IsProductionManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToProductionReportsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Production Reports"
                                   Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- ============ LOGISTICS MANAGER TOOLS ============ -->
                        <Border Style="{StaticResource SidebarItemStyle}"
                            IsVisible="{Binding IsLogisticsManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToLogisticsDashboardCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Logistics Dashboard"
                                   Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                            IsVisible="{Binding IsLogisticsManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToShippingCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“¦" FontSize="16" />
                                </Border>
                                <Label Text="Shipping"
                                   Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                            IsVisible="{Binding IsLogisticsManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToDeliveryTrackingCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸšš" FontSize="16" />
                                </Border>
                                <Label Text="Delivery Tracking"
                                   Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <Border Style="{StaticResource SidebarItemStyle}"
                            IsVisible="{Binding IsLogisticsManager}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToLogisticsReportsCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ“Š" FontSize="16" />
                                </Border>
                                <Label Text="Logistics Reports"
                                   Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>


                        <!-- ====================================== -->
                        <!-- SYSTEM (ALL ROLES) -->
                        <!-- ====================================== -->
                        <Label Text="System"
                           Style="{StaticResource SidebarSectionHeader}"
                           Margin="12,16,12,4" />

                        <!-- Users -->
                        <Border Style="{StaticResource SidebarItemStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToUsersCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="ðŸ‘¨â€ðŸ’¼" FontSize="16" />
                                </Border>
                                <Label Text="Users"
                                   Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                        <!-- Settings -->
                        <Border Style="{StaticResource SidebarItemStyle}">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NavigateToSettingsCommand}" />
                            </Border.GestureRecognizers>

                            <HorizontalStackLayout Spacing="12" Padding="12,12">
                                <Border Style="{StaticResource SidebarLayout}">
                                    <Label Text="âš™ï¸" FontSize="16" />
                                </Border>
                                <Label Text="Settings"
                                   Style="{StaticResource SidebarItemText}" />
                            </HorizontalStackLayout>
                        </Border>

                    </VerticalStackLayout>
                </ScrollView>

                <!-- FOOTER -->
                <Border Grid.Row="2"
                    Padding="20,0,20,10"
                    Background="{DynamicResource HeaderBackgroundColor}">
                    <VerticalStackLayout Spacing="5"
                                     HorizontalOptions="Center"
                                     VerticalOptions="Center">

                        <BoxView HeightRequest="1"
                             Color="{DynamicResource BorderColor}" />

                        <HorizontalStackLayout Spacing="10">
                            <Label Text="âœ“" FontSize="10" TextColor="{StaticResource Success}" />
                            <Label Text="v1.0.0 â€¢ LAN Ready"
                               FontSize="10"
                               TextColor="{DynamicResource TertiaryTextColor}" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Border>

            </Grid>
        </Border>

        <!-- RIGHT CONTENT -->
        <!-- NavigationPage is a Page and cannot be a child of a Layout. Replace it with a ContentView and render Page.Content into it at runtime. -->
        <ContentView Grid.Column="1" x:Name="ContentArea" />


    </Grid>
</ContentPage>